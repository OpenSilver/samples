<units:ShowcaseItem
    x:Class="OpenSilverShowcase.Datas.Examples.MvvmItem"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:units="clr-namespace:OpenSilverShowcase.Support.UI.Units;assembly=OpenSilverShowcase.Support"
    Description="fundamentals of button styling with colors, fonts, and images."
    Title="MVVM"
    Order="1">
    <units:ShowcaseItem.CodeSources>
        <units:CodeSource Key="xaml" Source="/Examples/MvvmItem.xaml"/>
        <units:CodeSource Key="xaml.cs" Source="/Examples/MvvmItem.xaml.cs"/>
    </units:ShowcaseItem.CodeSources>
    <units:ShowcaseItem.DemoContent>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <StackPanel>
                <TextBlock Text="Demonstrates the Model-View-ViewModel (MVVM) pattern using the CommunityToolkit.Mvvm package." TextWrapping="Wrap"/>
                <Button Grid.Row="1"
                        Margin="0 10"
                        HorizontalAlignment="Left"
                        Command="{Binding AddCommand}">
                    <StackPanel Orientation="Horizontal" Margin="5">
                        <Path Width="16"
                              Height="16"
                              VerticalAlignment="Center"
                              Data="M 9,0 L 11,0 11,9 20,9 20,11 11,11 11,20 9,20 9,11 0,11 0,9 9,9Z"
                              Fill="{Binding Path=Foreground, RelativeSource={RelativeSource AncestorType=Button}}"
                              Stretch="Uniform"/>
                        <TextBlock Margin="5,0,0,0" Text="Add Movie"/>
                    </StackPanel>
                </Button>
            </StackPanel>

            <DataGrid Name="dataGrid"
                      Grid.Row="1"
                      AutoGenerateColumns="False"
                      FontSize="12"
                      ItemsSource="{Binding Movies}">
                <DataGrid.Columns>
                    <DataGridTextColumn Binding="{Binding Title, ValidatesOnNotifyDataErrors=True}" Header="Title"/>
                    <DataGridCheckBoxColumn Binding="{Binding Favorite}" Header="Favorite"/>
                    <DataGridTemplateColumn Width="110" Header="Rating">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Rating VerticalAlignment="Center"
                                        ItemCount="5"
                                        Value="{Binding MyRating, Mode=TwoWay}"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn IsReadOnly="True">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Width="20"
                                        Height="20"
                                        Padding="0"
                                        HorizontalContentAlignment="Center"
                                        VerticalContentAlignment="Center"
                                        Command="{Binding RelativeSource={RelativeSource AncestorType=DataGrid}, Path=DataContext.RemoveCommand}"
                                        CommandParameter="{Binding}"
                                        Content="-"
                                        ToolTip="Remove"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>

            <DataForm Grid.Row="2"
                      Margin="0 10"
                      CommandButtonsVisibility="Navigation"
                      CurrentItem="{Binding ElementName=dataGrid, Path=SelectedItem, Mode=TwoWay}"
                      ItemsSource="{Binding Movies}"/>
        </Grid>
    </units:ShowcaseItem.DemoContent>
</units:ShowcaseItem>
